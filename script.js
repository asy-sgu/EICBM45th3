document.addEventListener('DOMContentLoaded', () => {
    // 1. DOM 요소 선택
    // *주의*: SVG의 ID인 "Layer_1"을 사용합니다.
    const mapElement = document.getElementById('Layer_1');
    
    // 정보 패널 요소 선택
    const regionNameEl = document.getElementById('region-name');
    const marketListEl = document.getElementById('market-list');
    const specialtyListEl = document.getElementById('specialty-list');

    // 2. 지역별 데이터 정의 (SVG ID와 정확히 일치하는 한글 키 사용)
    // SVG 파일의 시/군/구 ID를 키로 사용합니다.
    const regionData = {
        
        // --- 서울특별시 (구 단위) ---
        '강동구': { name: '서울특별시 강동구', market: ['암사종합시장', '성내시장'], specialty: ['오이', '파'] },
        '송파구': { name: '서울특별시 송파구', market: ['마천중앙시장', '잠실새내역종합상가'], specialty: ['배추', '무'] },
        '강남구': { name: '서울특별시 강남구', market: ['강남역지하쇼핑센터', '영동전통시장'], specialty: ['고급 식기', '미술품'] },
        '서초구': { name: '서울특별시 서초구', market: ['남부터미널 상가', '반포종합시장'], specialty: ['꽃', '화훼'] },
        '관악구': { name: '서울특별시 관악구', market: ['신림동종합시장', '인헌시장'], specialty: ['순대', '국밥'] },
        '동작구': { name: '서울특별시 동작구', market: ['남성사계시장', '성대전통시장'], specialty: ['정육', '해산물'] },
        '영등포구': { name: '서울특별시 영등포구', market: ['영등포시장', '당산종합시장'], specialty: ['의류', '잡화'] },
        '금천구': { name: '서울특별시 금천구', market: ['남문시장', '현대시장'], specialty: ['구두', '의류'] },
        '구로구': { name: '서울특별시 구로구', market: ['남구로시장', '구로시장'], specialty: ['농산물', '공산품'] },
        '강서구': { name: '서울특별시 강서구', market: ['화곡중앙시장', '공항시장'], specialty: ['김장채소', '젓갈'] },
        '양천구': { name: '서울특별시 양천구', market: ['목동시장', '경창시장'], specialty: ['생활용품', '식자재'] },
        '마포구': { name: '서울특별시 마포구', market: ['망원시장', '마포농수산물시장'], specialty: ['수산물', '공예품'] },
        '서대문구': { name: '서울특별시 서대문구', market: ['영천시장', '인왕시장'], specialty: ['떡', '반찬'] },
        '은평구': { name: '서울특별시 은평구', market: ['연서시장', '대림시장'], specialty: ['약재', '잡곡'] },
        '노원구': { name: '서울특별시 노원구', market: ['도깨비시장', '공릉동도깨비시장'], specialty: ['청과', '과일'] },
        '도봉구': { name: '서울특별시 도봉구', market: ['창동골목시장', '방학동도깨비시장'], specialty: ['김치', '나물'] },
        '강북구': { name: '서울특별시 강북구', market: ['수유시장', '번동시장'], specialty: ['젓갈', '건어물'] },
        '성북구': { name: '서울특별시 성북구', market: ['돈암제일시장', '정릉시장'], specialty: ['의류', '한복'] },
        '중랑구': { name: '서울특별시 중랑구', market: ['우림시장', '동원시장'], specialty: ['생활용품', '잡화'] },
        '동대문구': { name: '서울특별시 동대문구', market: ['경동시장', '청량리종합시장'], specialty: ['한약재', '인삼'] },
        '광진구': { name: '서울특별시 광진구', market: ['자양골목시장', '중곡제일시장'], specialty: ['생선', '육류'] },
        '용산구': { name: '서울특별시 용산구', market: ['용문시장', '후암시장'], specialty: ['전자제품', '미군용품'] },
        '중구': { name: '서울특별시 중구', market: ['남대문시장', '방산시장'], specialty: ['액세서리', '포장재'] },
        '종로구': { name: '서울특별시 종로구', market: ['광장시장', '통인시장'], specialty: ['한복', '빈대떡'] },
        '성동구': { name: '서울특별시 성동구', market: ['금남시장', '마장동축산물시장'], specialty: ['축산물', '한우'] },

        // --- 부산광역시 (구/군 단위) ---
        // 이제 부산 지역의 ID가 시/군/구 단위로 분할되어 있으므로, 그에 맞게 정의합니다.
        '기장군': { name: '부산광역시 기장군', market: ['기장시장', '정관시장'], specialty: ['미역', '다시마'] },
        '사상구': { name: '부산광역시 사상구', market: ['괘법르네시떼상가', '사상시장'], specialty: ['신발', '공산품'] },
        '수영구': { name: '부산광역시 수영구', market: ['팔도시장', '망미중앙시장'], specialty: ['횟감', '생선'] },
        '연제구': { name: '부산광역시 연제구', market: ['연산시장', '거제시장'], specialty: ['식자재', '농산물'] },
        '강서구_00000005965601791535691050000009006076288229410219_': { name: '부산광역시 강서구', market: ['명지시장', '대저시장'], specialty: ['대저 토마토', '김'] },
        '금정구': { name: '부산광역시 금정구', market: ['금정시장', '구서시장'], specialty: ['등산용품', '먹거리'] },
        '사하구': { name: '부산광역시 사하구', market: ['괴정골목시장', '하단어시장'], specialty: ['수산물', '건어물'] },
        '해운대구': { name: '부산광역시 해운대구', market: ['해운대시장', '반송시장'], specialty: ['횟감', '부산어묵'] },
        '북구_00000147926145647962615330000006782993992366670232_': { name: '부산광역시 북구', market: ['구포시장', '덕천시장'], specialty: ['구포 국수', '잡곡'] },
        '남구_00000052072439607353513050000004236392404629863311_': { name: '부산광역시 남구', market: ['못골시장', '대연골목시장'], specialty: ['파전', '동동주'] },
        '동래구': { name: '부산광역시 동래구', market: ['동래시장', '수안인정시장'], specialty: ['파전', '술'] },
        '부산진구': { name: '부산광역시 부산진구', market: ['부전시장', '당감시장'], specialty: ['농수산물', '식자재'] },
        '영도구': { name: '부산광역시 영도구', market: ['남항시장', '봉래시장'], specialty: ['해산물', '젓갈'] },
        '동구_00000168118645732070697520000016326732679638779068_': { name: '부산광역시 동구', market: ['자유시장', '진시장'], specialty: ['의류', '포목'] },
        '서구_00000120547725597948363590000012183695143128138397_': { name: '부산광역시 서구', market: ['충무동해안시장', '부평깡통시장'], specialty: ['건어물', '수입과자'] },
        '중구_00000099627018138385645060000002418025641920964788_': { name: '부산광역시 중구', market: ['국제시장', '깡통시장'], specialty: ['수입품', '먹거리'] },
        
        // --- 제주특별자치도 (시 단위) ---
        '제주시': { name: '제주특별자치도 제주시', market: ['동문시장', '제주민속오일장'], specialty: ['제주 은갈치', '제주 감귤'] },
        '서귀포시': { name: '제주특별자치도 서귀포시', market: ['서귀포 매일올레시장', '향토오일장'], specialty: ['한라봉', '흑돼지'] },

        // --- 경상남도 (시/군 단위) ---
        '합천군': { name: '경상남도 합천군', market: ['합천삼가시장', '가야시장'], specialty: ['합천 한우', '밤'] },
        '거창군': { name: '경상남도 거창군', market: ['거창시장', '위천시장'], specialty: ['거창 사과', '딸기'] },
        '함양군': { name: '경상남도 함양군', market: ['함양시장', '안의시장'], specialty: ['함양 양파', '산양삼'] },
        '산청군': { name: '경상남도 산청군', market: ['산청시장', '금서시장'], specialty: ['산청 곶감', '약초'] },
        '하동군': { name: '경상남도 하동군', market: ['하동시장', '화개장터'], specialty: ['하동 녹차', '재첩'] },
        '남해군': { name: '경상남도 남해군', market: ['남해시장', '전통시장'], specialty: ['멸치', '마늘'] },
        '고성군_00000028326800830962186490000011380967607044266940_': { name: '경상남도 고성군', market: ['고성시장', '고성오일장'], specialty: ['공룡빵', '가리비'] },
        '창녕군': { name: '경상남도 창녕군', market: ['창녕시장', '영산시장'], specialty: ['양파', '마늘'] },
        '함안군': { name: '경상남도 함안군', market: ['가야시장', '함안시장'], specialty: ['수박', '곶감'] },
        '의령군': { name: '경상남도 의령군', market: ['의령시장', '부림시장'], specialty: ['망개떡', '소고기국밥'] },
        '양산시': { name: '경상남도 양산시', market: ['남부시장', '웅상시장'], specialty: ['매실', '배'] },
        '거제시': { name: '경상남도 거제시', market: ['고현시장', '옥포시장'], specialty: ['유자', '멸치'] },
        '밀양시': { name: '경상남도 밀양시', market: ['밀양아리랑시장', '무안시장'], specialty: ['밀양 얼음골 사과', '대추'] },
        '김해시': { name: '경상남도 김해시', market: ['동상시장', '삼계시장'], specialty: ['단감', '장군차'] },
        '사천시': { name: '경상남도 사천시', market: ['삼천포용궁시장', '사천시장'], specialty: ['쥐치포', '멸치'] },
        '통영시': { name: '경상남도 통영시', market: ['중앙시장', '서호시장'], specialty: ['굴', '충무김밥'] },
        '진주시': { name: '경상남도 진주시', market: ['진주중앙시장', '논개시장'], specialty: ['실크', '진주냉면'] },
        '창원시_진해구': { name: '경상남도 창원시 진해구', market: ['진해중앙시장', '경화시장'], specialty: ['벚꽃빵', '멸치'] },
        '창원시_마산회원구': { name: '경상남도 창원시 마산회원구', market: ['마산어시장', '합성동시장'], specialty: ['아귀찜', '젓갈'] },
        '창원시_마산합포구': { name: '경상남도 창원시 마산합포구', market: ['마산어시장', '창동시장'], specialty: ['아귀찜', '해산물'] },
        '창원시_성산구': { name: '경상남도 창원시 성산구', market: ['가음정시장', '사파시장'], specialty: ['공산품', '육류'] },
        '창원시_의창구': { name: '경상남도 창원시 의창구', market: ['창원명서시장', '도계시장'], specialty: ['단감', '잡곡'] },
        
        // --- 경상북도 (시/군 단위) ---
        '울진군': { name: '경상북도 울진군', market: ['울진시장', '후포시장'], specialty: ['울진 대게', '금강송'] },
        '봉화군': { name: '경상북도 봉화군', market: ['봉화시장', '춘양시장'], specialty: ['송이', '약초'] },
        '예천군': { name: '경상북도 예천군', market: ['예천상설시장', '용궁순대'], specialty: ['예천 참깨', '순대'] },
        '칠곡군': { name: '경상북도 칠곡군', market: ['왜관시장', '북삼시장'], specialty: ['꿀', '참외'] },
        '성주군': { name: '경상북도 성주군', market: ['성주시장', '용암시장'], specialty: ['성주 참외', '멜론'] },
        '고령군': { name: '경상북도 고령군', market: ['대가야시장', '고령시장'], specialty: ['고령 딸기', '한과'] },
        '청도군': { name: '경상북도 청도군', market: ['화양시장', '청도시장'], specialty: ['청도 반시', '복숭아'] },
        '영덕군': { name: '경상북도 영덕군', market: ['강구시장', '영덕시장'], specialty: ['영덕 대게', '물가자미'] },
        '영양군': { name: '경상북도 영양군', market: ['영양시장', '입암시장'], specialty: ['영양 고추', '산나물'] },
        '청송군': { name: '경상북도 청송군', market: ['진보시장', '청송시장'], specialty: ['청송 사과', '달기약수'] },
        '의성군': { name: '경상북도 의성군', market: ['의성전통시장', '봉양시장'], specialty: ['의성 마늘', '쌀'] },
        '군위군': { name: '경상북도 군위군', market: ['군위시장', '삼국유사시장'], specialty: ['대추', '사과'] },
        '경산시': { name: '경상북도 경산시', market: ['자인시장', '하양시장'], specialty: ['복숭아', '포도'] },
        '문경시': { name: '경상북도 문경시', market: ['문경중앙시장', '점촌중앙시장'], specialty: ['오미자', '사과'] },
        '상주시': { name: '경상북도 상주시', market: ['상주풍물시장', '중앙시장'], specialty: ['상주 곶감', '쌀'] },
        '영천시': { name: '경상북도 영천시', market: ['영천공설시장', '금호시장'], specialty: ['영천 포도', '마늘'] },
        '영주시': { name: '경상북도 영주시', market: ['영주중앙시장', '풍기인삼시장'], specialty: ['풍기 인삼', '사과'] },
        '구미시': { name: '경상북도 구미시', market: ['구미새마을중앙시장', '선산시장'], specialty: ['복숭아', '자두'] },
        '안동시': { name: '경상북도 안동시', market: ['안동구시장', '풍산시장'], specialty: ['안동 간고등어', '소주'] },
        '김천시': { name: '경상북도 김천시', market: ['평화시장', '황금시장'], specialty: ['포도', '자두'] },
        '경주시': { name: '경상북도 경주시', market: ['성동시장', '중앙시장'], specialty: ['경주빵', '찰보리빵'] },
        '포항시_북구': { name: '경상북도 포항시 북구', market: ['죽도시장', '흥해시장'], specialty: ['과메기', '문어'] },
        '포항시_남구': { name: '경상북도 포항시 남구', market: ['죽도시장', '오천시장'], specialty: ['과메기', '대게'] },
        '울릉군': { name: '경상북도 울릉군', market: ['울릉시장', '도동어판장'], specialty: ['오징어', '명이 나물'] },

        // --- 전라남도 (시/군 단위) ---
        '신안군': { name: '전라남도 신안군', market: ['천일염직거래장터', '암태도시장'], specialty: ['천일염', '새우젓'] },
        '진도군': { name: '전라남도 진도군', market: ['진도읍시장', '쉬미항수산시장'], specialty: ['진도 홍주', '울금'] },
        '완도군': { name: '전라남도 완도군', market: ['완도공용시장', '청산도시장'], specialty: ['완도 전복', '다시마'] },
        '장성군': { name: '전라남도 장성군', market: ['장성시장', '황룡시장'], specialty: ['장성 사과', '곶감'] },
        '영광군': { name: '전라남도 영광군', market: ['영광시장', '홍농시장'], specialty: ['영광 굴비', '모싯잎송편'] },
        '함평군': { name: '전라남도 함평군', market: ['함평천지시장', '나비시장'], specialty: ['한우', '단감'] },
        '무안군': { name: '전라남도 무안군', market: ['무안시장', '일로시장'], specialty: ['무안 양파', '낙지'] },
        '영암군': { name: '전라남도 영암군', market: ['영암시장', '삼호시장'], specialty: ['영암 무화과', '배'] },
        '해남군': { name: '전라남도 해남군', market: ['해남매일시장', '해남오일시장'], specialty: ['해남 고구마', '김치'] },
        '강진군': { name: '전라남도 강진군', market: ['강진시장', '마량시장'], specialty: ['청자', '피망'] },
        '장흥군': { name: '전라남도 장흥군', market: ['장흥토요시장', '회진시장'], specialty: ['장흥 한우', '표고버섯'] },
        '화순군': { name: '전라남도 화순군', market: ['화순고인돌시장', '능주시장'], specialty: ['화순 흑염소', '파프리카'] },
        '보성군': { name: '전라남도 보성군', market: ['보성녹차골시장', '벌교시장'], specialty: ['보성 녹차', '꼬막'] },
        '고흥군': { name: '전라남도 고흥군', market: ['고흥전통시장', '녹동시장'], specialty: ['유자', '석류'] },
        '구례군': { name: '전라남도 구례군', market: ['구례시장', '화엄사시장'], specialty: ['산수유', '흑염소'] },
        '곡성군': { name: '전라남도 곡성군', market: ['곡성기차마을전통시장', '옥과시장'], specialty: ['토란', '멜론'] },
        '담양군': { name: '전라남도 담양군', market: ['담양시장', '창평시장'], specialty: ['대나무 공예품', '한과'] },
        '광양시': { name: '전라남도 광양시', market: ['광양5일시장', '중마시장'], specialty: ['매실', '곶감'] },
        '나주시': { name: '전라남도 나주시', market: ['나주목사고을시장', '영산포시장'], specialty: ['나주 배', '홍어'] },
        '순천시': { name: '전라남도 순천시', market: ['아랫장', '웃장'], specialty: ['짱뚱어탕', '고들빼기'] },
        '여수시': { name: '전라남도 여수시', market: ['여수수산시장', '교동시장'], specialty: ['돌산 갓김치', '금오도 방풍'] },
        '목포시': { name: '전라남도 목포시', market: ['자유시장', '동부시장'], specialty: ['목포 세발낙지', '꽃게'] },
        
        // --- 전라북도 (시/군 단위) ---
        '부안군': { name: '전라북도 부안군', market: ['부안상설시장', '곰소젓갈시장'], specialty: ['곰소 젓갈', '오디'] },
        '고창군': { name: '전라북도 고창군', market: ['고창전통시장', '해리시장'], specialty: ['고창 복분자', '장어'] },
        '순창군': { name: '전라북도 순창군', market: ['순창전통시장', '금과시장'], specialty: ['순창 고추장', '장아찌'] },
        '장수군': { name: '전라북도 장수군', market: ['장계시장', '장수시장'], specialty: ['장수 사과', '한우'] },
        '무주군': { name: '전라북도 무주군', market: ['무주반디시장', '안성시장'], specialty: ['무주 머루', '천마'] },
        '진안군': { name: '전라북도 진안군', market: ['진안고원시장', '마이산시장'], specialty: ['홍삼', '흑돼지'] },
        '완주군': { name: '전라북도 완주군', market: ['봉동시장', '삼례시장'], specialty: ['완주 수미', '딸기'] },
        '김제시': { name: '전라북도 김제시', market: ['김제전통시장', '금산시장'], specialty: ['지평선 쌀', '연근'] },
        '남원시': { name: '전라북도 남원시', market: ['남원공설시장', '금지시장'], specialty: ['남원 춘향골 한과', '목기'] },
        '정읍시': { name: '전라북도 정읍시', market: ['샘골시장', '태인시장'], specialty: ['정읍 한우', '쌍화탕'] },
        '익산시': { name: '전라북도 익산시', market: ['익산중앙시장', '북부시장'], specialty: ['보석', '멜론'] },
        '군산시': { name: '전라북도 군산시', market: ['군산공설시장', '월명시장'], specialty: ['박대', '오징어'] },
        '전주시_덕진구': { name: '전라북도 전주시 덕진구', market: ['모래내시장', '전통시장'], specialty: ['비빔밥', '콩나물국밥'] },
        '전주시_완산구': { name: '전라북도 전주시 완산구', market: ['남부시장', '신중앙시장'], specialty: ['모주', '전주막걸리'] },
        '임실군': { name: '전라북도 임실군', market: ['임실시장', '오수시장'], specialty: ['임실 치즈', '고추'] },
        
        // --- 충청남도 (시/군 단위) ---
        '태안군': { name: '충청남도 태안군', market: ['서부시장', '안면도수산시장'], specialty: ['꽃게', '대하'] },
        '예산군': { name: '충청남도 예산군', market: ['삽교시장', '예산시장'], specialty: ['예산 사과', '장터국밥'] },
        '홍성군': { name: '충청남도 홍성군', market: ['광천시장', '홍성전통시장'], specialty: ['홍성 한우', '광천 김'] },
        '청양군': { name: '충청남도 청양군', market: ['청양시장', '정산시장'], specialty: ['청양 고추', '구기자'] },
        '서천군': { name: '충청남도 서천군', market: ['한산모시시장', '마량포구시장'], specialty: ['한산 모시', '박대'] },
        '부여군': { name: '충청남도 부여군', market: ['부여중앙시장', '규암시장'], specialty: ['수박', '토마토'] },
        '금산군': { name: '충청남도 금산군', market: ['금산인삼시장', '금산시장'], specialty: ['금산 인삼', '약초'] },
        '당진시': { name: '충청남도 당진시', market: ['당진전통시장', '합덕시장'], specialty: ['실치회', '쌀'] },
        '계룡시': { name: '충청남도 계룡시', market: ['계룡시장', '엄사시장'], specialty: ['군납품', '농산물'] },
        '논산시': { name: '충청남도 논산시', market: ['화지중앙시장', '강경시장'], specialty: ['딸기', '젓갈'] },
        '서산시': { name: '충청남도 서산시', market: ['동부시장', '해미시장'], specialty: ['마늘', '생강'] },
        '아산시': { name: '충청남도 아산시', market: ['온양온천시장', '배방시장'], specialty: ['아산 맑은쌀', '배'] },
        '보령시': { name: '충청남도 보령시', market: ['대천시장', '웅천시장'], specialty: ['머드 화장품', '키조개'] },
        '공주시': { name: '충청남도 공주시', market: ['산성시장', '공주시장'], specialty: ['알밤', '한우'] },
        '천안시_서북구': { name: '충청남도 천안시 서북구', market: ['성정시장', '불당시장'], specialty: ['호두', '천안배'] },
        '천안시_동남구': { name: '충청남도 천안시 동남구', market: ['중앙시장', '병천아우내장터'], specialty: ['호두과자', '순대'] },
        
        // --- 대전광역시 (구 단위) ---
        '대덕구': { name: '대전광역시 대덕구', market: ['오정동농수산물시장', '중리시장'], specialty: ['대덕 특산품', '산나물'] },
        '유성구': { name: '대전광역시 유성구', market: ['유성장', '도룡시장'], specialty: ['온천상품', '밀짚모자'] },
        '서구_00000070079308241807456810000009906952303145040783_': { name: '대전광역시 서구', market: ['한민시장', '도마큰시장'], specialty: ['신선식품', '육류'] },
        '중구_00000094613238931185809090000008225692606241301176_': { name: '대전광역시 중구', market: ['태평시장', '중앙시장'], specialty: ['잡화', '의류'] },
        '동구_00000077295828839796765370000017862375135753146537_': { name: '대전광역시 동구', market: ['역전시장', '신도꼼지락시장'], specialty: ['건어물', '공산품'] },

        // --- 기타 광역/도 단위 ---
        '세종특별자치시_00000020366141440786130000000003127030897387599272_': { name: '세종특별자치시', market: ['조치원시장', '세종전통시장'], specialty: ['복숭아', '배'] },
        
        // --- 광주광역시 (구 단위) ---
        '광산구': { name: '광주광역시 광산구', market: ['송정5일장', '월곡시장'], specialty: ['송정떡갈비', '애호박'] },
        '북구_00000166644947004510416370000000521895385418006683_': { name: '광주광역시 북구', market: ['말바우시장', '운암시장'], specialty: ['농수산물', '잡화'] },
        '남구_00000057829278394348245060000007176446015815177360_': { name: '광주광역시 남구', market: ['봉선시장', '월산시장'], specialty: ['청과', '반찬'] },
        '서구_00000160873284323135002220000003850002728341375910_': { name: '광주광역시 서구', market: ['양동시장', '화정시장'], specialty: ['김치', '홍어'] },
        '동구_00000183228372764615208210000009311056761204497822_': { name: '광주광역시 동구', market: ['대인시장', '남광주시장'], specialty: ['미술품', '해산물'] },

        // --- 대구광역시 (구/군 단위) ---
        '달성군': { name: '대구광역시 달성군', market: ['현풍백년도깨비시장', '화원시장'], specialty: ['참외', '토마토'] },
        '달서구': { name: '대구광역시 달서구', market: ['와룡시장', '월배시장'], specialty: ['의류', '가구'] },
        '수성구': { name: '대구광역시 수성구', market: ['신매시장', '범어시장'], specialty: ['고추', '마늘'] },
        '북구': { name: '대구광역시 북구', market: ['칠성시장', '산격시장'], specialty: ['농수산물', '약재'] },
        '남구': { name: '대구광역시 남구', market: ['관문시장', '봉덕시장'], specialty: ['닭발', '막창'] },
        '서구_00000095322446012922971850000014221499316402633894_': { name: '대구광역시 서구', market: ['서남시장', '비산시장'], specialty: ['건어물', '잡화'] },
        '동구_00000147187987661311838080000001073673105068167085_': { name: '대구광역시 동구', market: ['방촌시장', '동촌시장'], specialty: ['떡', '한과'] },
        '중구_00000163049878399489232690000013879300824881561003_': { name: '대구광역시 중구', market: ['서문시장', '약령시장'], specialty: ['한복', '한약재'] },

        // --- 울산광역시 (군/구 단위) ---
        '울주군': { name: '울산광역시 울주군', market: ['언양시장', '남창옹기종기시장'], specialty: ['언양 불고기', '옹기'] },
        '북구_00000009551120665523072970000015517345454175827332_': { name: '울산광역시 북구', market: ['농수산물시장', '호계시장'], specialty: ['해산물', '농산물'] },
        '동구_00000153670336490173914480000007280234862974620039_': { name: '울산광역시 동구', market: ['남목시장', '방어진시장'], specialty: ['방어', '대게'] },
        '남구_00000116235787361681521350000007395983019771300517_': { name: '울산광역시 남구', market: ['신정시장', '수암시장'], specialty: ['수산물', '떡'] },
        '중구_00000032630116403187728130000008423414302185526412_': { name: '울산광역시 중구', market: ['학산시장', '병영시장'], specialty: ['병영 막걸리', '전'] },

        // --- 인천광역시 (구/군 단위) ---
        '강화군': { name: '인천광역시 강화군', market: ['강화풍물시장', '강화중앙시장'], specialty: ['강화 인삼', '순무'] },
        '서구': { name: '인천광역시 서구', market: ['정서진중앙시장', '가정시장'], specialty: ['신선 농산물', '수산물'] },
        '계양구': { name: '인천광역시 계양구', market: ['계산시장', '병방시장'], specialty: ['청과', '잡곡'] },
        '부평구': { name: '인천광역시 부평구', market: ['부평깡시장', '부평시장'], specialty: ['의류', '잡화'] },
        '남동구': { name: '인천광역시 남동구', market: ['모래내시장', '만수시장'], specialty: ['건어물', '농산물'] },
        '연수구': { name: '인천광역시 연수구', market: ['연수시장', '옥련시장'], specialty: ['해산물', '공산품'] },
        '중구_00000090283923639619113360000014432887308064126373_': { name: '인천광역시 중구', market: ['신포시장', '동인천역지하상가'], specialty: ['닭강정', '공예품'] },
        '옹진군': { name: '인천광역시 옹진군', market: ['백령도시장', '대청도시장'], specialty: ['꽃게', '해삼'] },
        '동구': { name: '인천광역시 동구', market: ['송현시장', '중앙시장'], specialty: ['공산품', '생활용품'] },
        '미추홀구': { name: '인천광역시 미추홀구', market: ['용현시장', '제물포시장'], specialty: ['어묵', '분식'] },

        // --- 경기도 (시/군 단위) ---
        '양평군': { name: '경기도 양평군', market: ['양평물맑은시장', '용문천년시장'], specialty: ['양평 한우', '친환경 농산물'] },
        '가평군': { name: '경기도 가평군', market: ['가평오일장', '청평시장'], specialty: ['가평 잣', '밤'] },
        '연천군': { name: '경기도 연천군', market: ['전곡시장', '연천공설시장'], specialty: ['연천 율무', '콩'] },
        '여주시': { name: '경기도 여주시', market: ['여주한글시장', '여주5일장'], specialty: ['여주 쌀', '고구마'] },
        '포천시': { name: '경기도 포천시', market: ['포천반월아트홀시장', '운천시장'], specialty: ['이동 갈비', '막걸리'] },
        '양주시': { name: '경기도 양주시', market: ['양주별산대시장', '덕정시장'], specialty: ['송추 가마골', '고기'] },
        '광주시': { name: '경기도 광주시', market: ['경안시장', '곤지암시장'], specialty: ['소머리국밥', '청정채소'] },
        '화성시': { name: '경기도 화성시', market: ['발안시장', '남양시장'], specialty: ['화성 포도', '쌀'] },
        '김포시': { name: '경기도 김포시', market: ['김포북변시장', '통진시장'], specialty: ['금쌀', '인삼'] },
        '안성시': { name: '경기도 안성시', market: ['안성맞춤시장', '공도시장'], specialty: ['안성 유기', '쌀'] },
        '이천시': { name: '경기도 이천시', market: ['이천관고전통시장', '도자기마을'], specialty: ['이천 쌀', '도자기'] },
        '파주시': { name: '경기도 파주시', market: ['금촌통일시장', '문산자유시장'], specialty: ['개성 인삼', '장단콩'] },
        '용인시_수지구': { name: '경기도 용인시 수지구', market: ['풍덕천시장', '신봉시장'], specialty: ['청정채소', '신선육'] },
        '용인시_기흥구': { name: '경기도 용인시 기흥구', market: ['기흥시장', '구갈시장'], specialty: ['건어물', '잡곡'] },
        '하남시': { name: '경기도 하남시', market: ['덕풍시장', '신장시장'], specialty: ['미사리 카페거리', '호박'] },
        '의왕시': { name: '경기도 의왕시', market: ['도깨비시장', '오전시장'], specialty: ['청정채소', '떡'] },
        '군포시': { name: '경기도 군포시', market: ['산본시장', '군포시장'], specialty: ['생활용품', '잡화'] },
        '시흥시': { name: '경기도 시흥시', market: ['시흥삼미시장', '정왕시장'], specialty: ['연근', '대하'] },
        '오산시': { name: '경기도 오산시', market: ['오산오색시장', '궐동시장'], specialty: ['오산 막걸리', '잡곡'] },
        '남양주시': { name: '경기도 남양주시', market: ['금곡시장', '덕소시장'], specialty: ['유기농 채소', '배'] },
        '과천시': { name: '경기도 과천시', market: ['과천시장', '새서울프라자'], specialty: ['화훼', '원예용품'] },
        '고양시_일산서구': { name: '경기도 고양시 일산서구', market: ['일산시장', '가좌시장'], specialty: ['신선 농산물', '화훼'] },
        '고양시_일산동구': { name: '경기도 고양시 일산동구', market: ['마두시장', '백마시장'], specialty: ['농산물', '잡화'] },
        '고양시_덕양구': { name: '경기도 고양시 덕양구', market: ['원당시장', '화정시장'], specialty: ['한우', '채소'] },
        '안산시_상록구': { name: '경기도 안산시 상록구', market: ['본오시장', '사동시장'], specialty: ['수산물', '농산물'] },
        '평택시': { name: '경기도 평택시', market: ['평택국제중앙시장', '통복시장'], specialty: ['쌀', '미군용품'] },
        '광명시': { name: '경기도 광명시', market: ['광명시장', '새마을시장'], specialty: ['의류', '잡화'] },
        '부천시': { name: '경기도 부천시', market: ['부천자유시장', '역곡시장'], specialty: ['공산품', '청과'] },
        '안양시_동안구': { name: '경기도 안양시 동안구', market: ['평촌시장', '호계시장'], specialty: ['의류', '액세서리'] },
        '안양시_만안구': { name: '경기도 안양시 만안구', market: ['안양중앙시장', '박달시장'], specialty: ['신발', '잡화'] },
        '의정부시': { name: '경기도 의정부시', market: ['제일시장', '전통시장'], specialty: ['부대찌개', '고기'] },
        '성남시_분당구': { name: '경기도 성남시 분당구', market: ['오리뜰농수산물시장', '정자시장'], specialty: ['청과', '유기농품'] },
        '성남시_중원구': { name: '경기도 성남시 중원구', market: ['모란시장', '성호시장'], specialty: ['생필품', '모란장'] },
        '성남시_수정구': { name: '경기도 성남시 수정구', market: ['수정시장', '태평시장'], specialty: ['수정 의류', '가방'] },
        '수원시_영통구': { name: '경기도 수원시 영통구', market: ['매탄시장', '영통시장'], specialty: ['전자제품', '식자재'] },
        '수원시_팔달구': { name: '경기도 수원시 팔달구', market: ['못골시장', '지동시장'], specialty: ['치킨골목', '육류'] },
        '수원시_권선구': { name: '경기도 수원시 권선구', market: ['권선종합시장', '고색시장'], specialty: ['농수산물', '공산품'] },
        '수원시_장안구': { name: '경기도 수원시 장안구', market: ['연무시장', '파장시장'], specialty: ['떡볶이', '김밥'] },
        '동두천시': { name: '경기도 동두천시', market: ['중앙시장', '동광시장'], specialty: ['미군부대 상품', '잡화'] },
        '용인시_처인구': { name: '경기도 용인시 처인구', market: ['용인중앙시장', '백암장'], specialty: ['순대', '백암 쌀'] },
        '구리시': { name: '경기도 구리시', market: ['구리전통시장', '돌다리시장'], specialty: ['닭강정', '청과'] },
        '안산시_단원구_00000145048440221413544630000011872595071915344797_': { name: '경기도 안산시 단원구', market: ['원곡동시장', '고잔시장'], specialty: ['다문화 음식', '해산물'] },

        // --- 강원도 (시/군 단위) ---
        '양양군': { name: '강원도 양양군', market: ['양양시장', '하조대시장'], specialty: ['송이', '연어'] },
        '고성군': { name: '강원도 고성군', market: ['간성시장', '대진시장'], specialty: ['명태', '옥수수'] },
        '인제군': { name: '강원도 인제군', market: ['원통시장', '인제시장'], specialty: ['황태', '약초'] },
        '양구군': { name: '강원도 양구군', market: ['양구시장', '배꼽시장'], specialty: ['양구 멜론', '시래기'] },
        '화천군': { name: '강원도 화천군', market: ['화천시장', '사내시장'], specialty: ['산천어', '토마토'] },
        '철원군': { name: '강원도 철원군', market: ['동송시장', '와수시장'], specialty: ['철원 오대쌀', '잡곡'] },
        '정선군': { name: '강원도 정선군', market: ['정선아리랑시장', '고한시장'], specialty: ['곤드레', '황기'] },
        '평창군': { name: '강원도 평창군', market: ['평창올림픽시장', '봉평시장'], specialty: ['메밀', '송어'] },
        '영월군': { name: '강원도 영월군', market: ['영월시장', '주천시장'], specialty: ['곤드레', '다슬기'] },
        '횡성군': { name: '강원도 횡성군', market: ['횡성시장', '우천시장'], specialty: ['횡성 한우', '더덕'] },
        '홍천군': { name: '강원도 홍천군', market: ['홍천중앙시장', '양덕원시장'], specialty: ['홍천 잣', '강원도 찰옥수수'] },
        '삼척시': { name: '강원도 삼척시', market: ['삼척중앙시장', '도계시장'], specialty: ['문어', '미역'] },
        '속초시': { name: '강원도 속초시', market: ['속초관광수산시장', '중앙시장'], specialty: ['닭강정', '오징어순대'] },
        '태백시': { name: '강원도 태백시', market: ['황지자유시장', '장성시장'], specialty: ['태백산 한우', '고랭지 채소'] },
        '동해시': { name: '강원도 동해시', market: ['동해북평시장', '묵호항수산시장'], specialty: ['오징어', '해산물'] },
        '강릉시': { name: '강원도 강릉시', market: ['주문진시장', '강릉중앙시장'], specialty: ['건어물', '커피'] },
        '원주시': { name: '강원도 원주시', market: ['원주중앙시장', '문막시장'], specialty: ['원주 치악산 배', '복숭아'] },
        '춘천시': { name: '강원도 춘천시', market: ['춘천낭만시장', '풍물시장'], specialty: ['닭갈비', '막국수'] },

        // --- 충청북도 (시/군 단위) ---
        '단양군': { name: '충청북도 단양군', market: ['단양구경시장', '매포시장'], specialty: ['마늘', '쏘가리'] },
        '음성군': { name: '충청북도 음성군', market: ['무극시장', '감곡시장'], specialty: ['음성 인삼', '수박'] },
        '괴산군': { name: '충청북도 괴산군', market: ['괴산시장', '칠성시장'], specialty: ['고추', '대학찰옥수수'] },
        '진천군': { name: '충청북도 진천군', market: ['진천중앙시장', '덕산시장'], specialty: ['쌀', '생거진천'] },
        '증평군': { name: '충청북도 증평군', market: ['증평시장', '증평읍시장'], specialty: ['홍삼', '인삼'] },
        '영동군': { name: '충청북도 영동군', market: ['영동시장', '황간시장'], specialty: ['영동 포도', '와인'] },
        '옥천군': { name: '충청북도 옥천군', market: ['옥천시장', '청산시장'], specialty: ['복숭아', '들깨'] },
        '보은군': { name: '충청북도 보은군', market: ['보은시장', '속리산시장'], specialty: ['대추', '황토쌀'] },
        '제천시': { name: '충청북도 제천시', market: ['내토시장', '중앙시장'], specialty: ['약초', '한방'] },
        '충주시': { name: '충청북도 충주시', market: ['무학시장', '연원시장'], specialty: ['사과', '한우'] },
        '청주시_청원구': { name: '충청북도 청주시 청원구', market: ['오창시장', '북부시장'], specialty: ['쌀', '오창 멜론'] },
        '청주시_흥덕구': { name: '충청북도 청주시 흥덕구', market: ['봉명시장', '복대시장'], specialty: ['농수산물', '공산품'] },
        '청주시_서원구': { name: '충청북도 청주시 서원구', market: ['사창시장', '모충시장'], specialty: ['젓갈', '건어물'] },
        '청주시_상당구': { name: '충청북도 청주시 상당구', market: ['육거리종합시장', '내덕시장'], specialty: ['한과', '떡'] },
        
        // --- 기본값 ---
        'default': {
            name: '지도에서 지역을 선택하세요',
            market: ['마우스를 올린 후 추천 정보를 확인하세요.'],
            specialty: ['전국 다양한 전통시장과 특산물이 있습니다.']
        }
    };

    /**
     * 정보 패널 업데이트 함수
     */
    function updateInfoPanel(regionId) {
        const data = regionData[regionId] || regionData['default'];
        
        regionNameEl.textContent = data.name;
        
        const marketHtml = data.market.map(m => `<li>${m}</li>`).join('');
        const specialtyHtml = data.specialty.map(s => `<li>${s}</li>`).join('');

        marketListEl.innerHTML = `<ul>${marketHtml}</ul>`;
        specialtyListEl.innerHTML = `<ul>${specialtyHtml}</ul>`;
    }
    
    // --- 인라인 SVG 접근 로직 ---
    
    // SVG ID를 "Layer_1"로 설정
    if (!mapElement) {
         console.error("SVG 요소를 찾을 수 없습니다. HTML에서 ID가 'Layer_1'인지 확인하세요.");
         updateInfoPanel('default');
         return; 
    }
    
    // SVG 내부의 모든 <path> 또는 <polygon> 요소를 직접 선택
    const regions = mapElement.querySelectorAll('path, polygon');

    console.log(`[JS Debug] 총 ${regions.length}개 지역 요소 감지됨.`);

    regions.forEach(region => {
        const regionId = region.id; // 한글 ID 그대로 사용

        // ID가 유효한 데이터 키에 있을 때만 이벤트를 붙입니다.
        if (regionData[regionId]) {
            
            // 디버깅: 작동하는 지역 ID 확인
            // console.log(`[JS Debug] 이벤트 부착 성공: ${regionId}`); 
            
            region.addEventListener('mouseover', () => {
                updateInfoPanel(regionId);
            });
        } 
        /* else {
            // 디버깅: 매칭되지 않은 ID 확인 (필요시 주석 해제)
            // if (regionId && regionId.length > 5) {
            //     console.log(`[JS Debug] 경고: ${regionId} 에 대한 데이터 키가 없습니다.`);
            // }
        }
        */
    });
    
    // 초기 정보 패널 설정
    updateInfoPanel('default');
});